!function(){"use strict";angular.module("ubmk",["ui.router","toaster","ngAnimate"]).config(["$stateProvider","$urlRouterProvider",function(o,n){n.otherwise("/login"),o.state("main",{url:"/login",templateUrl:"/src/login/login.tpl",controller:"LoginController as login"}).state("dash",{url:"/dash",templateUrl:"/src/dash/dash.tpl",controller:"DashController as dash1"}).state("dash.infoBoard",{url:"/info",templateUrl:"/src/dash/infoBoard/infoBoard.tpl",controller:"InfoBoardController as info"}).state("dash.user",{url:"/user",templateUrl:"/src/dash/user/user.tpl",controller:"UserController as user"}).state("dash.booking",{url:"/booking",templateUrl:"/src/dash/booking/booking.tpl",controller:"BookingController as booking"}).state("dash.vendor",{url:"/vendor",templateUrl:"/src/dash/vendor/vendor.tpl",controller:"VendorController as vendor"})}])}(),angular.module("ubmk").constant("Host",{add:""}).factory("User",["$http","Host",function(o,n){function r(){return i?i:o({method:"GET",url:n.add+"/secure/question",params:{token:a}}).then(function(o){return i=o.data.questions,o})}function e(){return a}function t(o,n,r){c.name=o,c.ids=r,c.group=n}function s(){return c}function l(){var r=[];return c.ids.forEach(function(o){r.push(i[o].Id)}),o.post(n.add+"/secure/test",{token:a,ids:r,name:c.name,group:c.group})}var a=null,u=null,i=null,c={ids:[],name:null,group:null},g=function(r){return console.log(r),o.post(n.add+"/admin",r).then(function(o){return console.log(o),a=o.data.token,o})["catch"](function(o){return console.log("ww",o),o})},d=function(r,e,t){if(console.log("Q in addQues factory",r),a&&t&&u){var s={questionText:r.questionText,option1:r.option1,option2:r.option2,option3:r.option3,option4:r.option4,token:a,subject:t,correct:r.correct,tags:e};return console.log(s),o.post(n.add+"/secure/question",s)}return console.log("This hould not be happening"),new Error("Go to hell")},h=function(r){return a&&r.name?o.post(n.add+"/secure/tags",{name:r.name,token:a}):new Error("Not signed in or no tag")},f=function(){return o.get(n.add+"/tags")},m=function(r){return a&&r.name?o.post(n.add+"/subject",{name:r.name,token:a}):(console.log("Throw"),new Error("Not signed in or no tag"))},p=function(){return o.get(n.add+"/subject")},k=function(){return!!a};return{login:g,add:d,newTag:h,getTags:f,newSubject:m,getSubject:p,isLoggedIn:k,getQuestions:r,setTest:t,getTest:s,createTest:l,getToken:e}}]),angular.module("ubmk").controller("DashController",["$state","User","$scope",function(o,n,r){if(console.log("dash Controller"),!n.isLoggedIn())return void o.go("main");r.select="dashboard",o.go("dash.infoBoard");var e=this;e.add=function(){console.log("Trying to go"),o.go("dash.info")},e.questionTemp=!1,e.testTemp=!1}]),angular.module("ubmk").factory("Dash",["$http","User",function(o,n){var r=[],e=[],t=[];return{getUsers:function(){return r.length>0?r:o.get("/users",{params:{token:n.getToken()}}).then(function(o){return console.log("GetUsers",o),r=o.data.users,o.data.users})["catch"](function(o){return console.log(o),r})},getBookings:function(){return e.length>0?e:o.get("/bookings",{params:{token:n.getToken()}}).then(function(o){return console.log("GetUsers",o),e=o.data.bookings,o.data.bookings})["catch"](function(o){return console.log(o),e})},getVendors:function(){return t.length>0?t:o.get("/vendors").then(function(o){return t=o.data.vendors,o.data.vendors})["catch"](function(o){return console.log(o),t})}}}]),angular.module("ubmk").controller("LoginController",["User","$state","toaster",function(o,n,r){console.log("main Controller");var e=this;e.loginText="Submit",e.doLogin=function(){e.loginText="Please Wait.......",console.log("Username & Password",e.user),o.login(e.user).then(function(o){console.log("Toast"),o.data.error?r.pop("error","Error","Damn Boy Damn!!"):r.pop("success","Success","Verified"),n.go("dash")})["catch"](function(o){console.log(o.data.error),r.pop("error","Error","Damn Boy Damn!!"),e.loginText="Submit"})}}]),angular.module("ubmk").controller("BookingController",["Dash",function(o){console.log("Booking COntroller");var n=this,r=o.getBookings();Array.isArray(r)?n.bookings=r:r.then(function(o){n.bookings=o})}]),angular.module("ubmk").controller("InfoBoardController",["$state","User","Dash",function(o,n,r){console.log("infoBoard Controller");var e=this,t=r.getUsers();Array.isArray(t)?e.no_users=t.length:t.then(function(o){e.no_users=o.length});var s=r.getBookings();Array.isArray(s)?e.no_bookings=s.length:s.then(function(o){e.no_bookings=o.length})}]),angular.module("ubmk").controller("UserController",["Dash",function(o){console.log("Usr COntroller");var n=this,r=o.getUsers();Array.isArray(r)?n.users=r:r.then(function(o){n.users=o})}]),angular.module("ubmk").controller("VendorController",["Dash",function(o){console.log("Vendor Controller");var n=this,r=o.getVendors();Array.isArray(r)?n.vendors=r:r.then(function(o){n.vendors=o})}]);