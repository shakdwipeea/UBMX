!function(){"use strict";angular.module("ubmk",["ui.router","toaster","ngAnimate"]).config(["$stateProvider","$urlRouterProvider",function(o,n){n.otherwise("/login"),o.state("main",{url:"/login",templateUrl:"/src/login/login.tpl",controller:"LoginController as login"}).state("dash",{url:"/dash",templateUrl:"/src/dash/dash.tpl",controller:"DashController as dash1"}).state("dash.infoBoard",{url:"/info",templateUrl:"/src/dash/infoBoard/infoBoard.tpl",controller:"InfoBoardController as info"}).state("dash.user",{url:"/user",templateUrl:"/src/dash/user/user.tpl",controller:"UserController as user"}).state("dash.booking",{url:"/booking",templateUrl:"/src/dash/booking/booking.tpl",controller:"BookingController as booking"}).state("dash.vendor",{url:"/vendor",templateUrl:"/src/dash/vendor/vendor.tpl",controller:"VendorController as vendor"}).state("dash.vehicle",{url:"/vehicle",templateUrl:"/src/dash/vehicle/vehicle.tpl",controller:"VehicleController as vehicle"}).state("dash.problem",{url:"/problem",templateUrl:"/src/dash/problem/problem.tpl",controller:"ProblemController as problem"}).state("dash.booking_type",{url:"/booking_type",templateUrl:"/src/dash/booking_type/booking_type.tpl",controller:"BookingTypeController as bookingType"})}])}(),angular.module("ubmk").constant("Host",{add:""}).factory("User",["$http","Host",function(o,n){function e(){return i?i:o({method:"GET",url:n.add+"/secure/question",params:{token:a}}).then(function(o){return i=o.data.questions,o})}function r(){return a}function t(o,n,e){c.name=o,c.ids=e,c.group=n}function l(){return c}function s(){var e=[];return c.ids.forEach(function(o){e.push(i[o].Id)}),o.post(n.add+"/secure/test",{token:a,ids:e,name:c.name,group:c.group})}var a=null,u=null,i=null,c={ids:[],name:null,group:null},g=function(e){return console.log(e),o.post(n.add+"/admin",e).then(function(o){return console.log(o),a=o.data.token,o})["catch"](function(o){return console.log("ww",o),o})},d=function(e,r,t){if(console.log("Q in addQues factory",e),a&&t&&u){var l={questionText:e.questionText,option1:e.option1,option2:e.option2,option3:e.option3,option4:e.option4,token:a,subject:t,correct:e.correct,tags:r};return console.log(l),o.post(n.add+"/secure/question",l)}return console.log("This hould not be happening"),new Error("Go to hell")},h=function(e){return a&&e.name?o.post(n.add+"/secure/tags",{name:e.name,token:a}):new Error("Not signed in or no tag")},m=function(){return o.get(n.add+"/tags")},f=function(e){return a&&e.name?o.post(n.add+"/subject",{name:e.name,token:a}):(console.log("Throw"),new Error("Not signed in or no tag"))},p=function(){return o.get(n.add+"/subject")},b=function(){return!!a};return{login:g,add:d,newTag:h,getTags:m,newSubject:f,getSubject:p,isLoggedIn:b,getQuestions:e,setTest:t,getTest:l,createTest:s,getToken:r}}]),angular.module("ubmk").controller("DashController",["$state","User","$scope",function(o,n,e){if(console.log("dash Controller"),!n.isLoggedIn())return void o.go("main");e.select="dashboard",o.go("dash.infoBoard");var r=this;r.add=function(){console.log("Trying to go"),o.go("dash.info")},r.questionTemp=!1,r.testTemp=!1}]),angular.module("ubmk").factory("Dash",["$http","User",function(o,n){var e=[],r=[],t=[],l=[],s=[],a=[];return{getUsers:function(){return e.length>0?e:o.get("/users",{params:{token:n.getToken()}}).then(function(o){return console.log("GetUsers",o),e=o.data.users,o.data.users})["catch"](function(o){return console.log(o),e})},getBookings:function(){return r.length>0?r:o.get("/bookings",{params:{token:n.getToken()}}).then(function(o){return console.log("GetUsers",o),r=o.data.bookings,o.data.bookings})["catch"](function(o){return console.log(o),r})},getVendors:function(){return t.length>0?t:o.get("/vendors").then(function(o){return t=o.data.vendors,o.data.vendors})["catch"](function(o){return console.log(o),t})},getVehicles:function(){return l.length>0?l:o.get("/vehicles").then(function(o){return l=o.data.vehicles,o.data.vehicles})["catch"](function(o){return console.log(o),l})},getProblems:function(){return s.length>0?s:o.get("/problems").then(function(o){return s=o.data.problems,console.log("Problems",s),o.data.problems})["catch"](function(o){return console.log(o),s})},getBookingType:function(){return a.length>0?a:o.get("/booking_type").then(function(o){return a=o.data.booking_type,o.data.types})["catch"](function(o){return console.log(o),a})}}}]),angular.module("ubmk").controller("LoginController",["User","$state","toaster",function(o,n,e){console.log("main Controller");var r=this;r.loginText="Submit",r.doLogin=function(){r.loginText="Please Wait.......",console.log("Username & Password",r.user),o.login(r.user).then(function(o){console.log("Toast"),o.data.error?e.pop("error","Error","Damn Boy Damn!!"):e.pop("success","Success","Verified"),n.go("dash")})["catch"](function(o){console.log(o.data.error),e.pop("error","Error","Damn Boy Damn!!"),r.loginText="Submit"})}}]),angular.module("ubmk").controller("BookingController",["Dash",function(o){console.log("Booking COntroller");var n=this,e=o.getBookings();Array.isArray(e)?n.bookings=e:e.then(function(o){n.bookings=o})}]),angular.module("ubmk").controller("BookingTypeController",["Dash",function(o){var n=this,e=o.getBookingType();Array.isArray(e)?n.booking_type=e:e.then(function(o){n.booking_type=o})}]),angular.module("ubmk").controller("InfoBoardController",["$state","User","Dash",function(o,n,e){console.log("infoBoard Controller");var r=this,t=e.getUsers();Array.isArray(t)?r.no_users=t.length:t.then(function(o){r.no_users=o.length});var l=e.getBookings();Array.isArray(l)?r.no_bookings=l.length:l.then(function(o){r.no_bookings=o.length})}]),angular.module("ubmk").controller("ProblemController",["Dash",function(o){var n=this,e=o.getProblems();console.log("Provlem Controller"),Array.isArray(e)?(console.log("HHUH"),n.problems=e):e.then(function(o){console.log("Gor Problemsd",o),n.problems=o})}]),angular.module("ubmk").controller("UserController",["Dash",function(o){console.log("Usr COntroller");var n=this,e=o.getUsers();Array.isArray(e)?n.users=e:e.then(function(o){n.users=o})}]),angular.module("ubmk").controller("VehicleController",["Dash",function(o){console.log("Vehicle Controller");var n=this,e=o.getVehicles();Array.isArray(e)?n.vehicles=e:e.then(function(o){n.vehicles=o})}]),angular.module("ubmk").controller("VendorController",["Dash",function(o){console.log("Vendor Controller");var n=this,e=o.getVendors();Array.isArray(e)?n.vendors=e:e.then(function(o){n.vendors=o})}]);